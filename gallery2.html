<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World!</title>
    <script src="//unpkg.com/alpinejs" defer></script>
</head>
<body>
    <h1>Hello World!</h1>
    <canvas id="canvas" width="600" height="600"></canvas>
    <script> 
      // We will put our WebGL code here

     //vertices & index buffer

        const vertices = new Float32Array([
            0.0, 0.5, 0.0, // First vertex
            -0.5, -0.5, 0.0, // Second vertex
            0.5, -0.5, 0.0  // Third vertex
        ]);

        //const indices[] = {
        //    0, 1, 2,
        //    2, 3, 0
        //};

        const gl = document.getElementById("canvas").getContext("webgl");

        //declare shaders
        const vertexShader = `
            attribute vec4 position;
            void main() {
                gl_Position = position;
            }`;

        const fragmentShader = `
            precision mediump float;
            uniform vec4 color;
            void main() {
                gl_FragColor = color;
            }`;


        //compile shaders

        const vs = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vs, vertexShader);
        gl.compileShader(vs);

        const fs = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fs, fragmentShader);
        gl.compileShader(fs);


        // Create and initialize the WebGL program
        const program = gl.createProgram();
        gl.attachShader(program, vs);
        gl.attachShader(program, fs);
        gl.linkProgram(program);
        gl.useProgram(program);


        // Shader attribute variable for position
        const position = gl.getAttribLocation(program, "position");

        // Create the GPU array buffer with the vertices
        const buffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        gl.vertexAttribPointer(
            position, // Target
            3,        // Chunk size (send the values 3 by 3)
            gl.FLOAT, // Type
            false,    // Normalize
            0,        // Stride
            0         // Offset
        );
        gl.enableVertexAttribArray(position);

        // Shader uniform variable for color (read-only)
        const color = gl.getUniformLocation(program, "color");

        // Set color        R  G  B  A
        gl.uniform4f(color, 0, 1, 0, 1);

        // Set the clear color
        gl.clearColor(0.0, 0.0, 0.0, 1.0);

        // Clear canvas
        gl.clear(gl.COLOR_BUFFER_BIT);

        // Render
        gl.drawArrays(
            gl.TRIANGLES, // Mode
            0,            // Start
            3             // Count
        );

    </script>
</body>
</html>